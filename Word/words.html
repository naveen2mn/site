<html><head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="" rel="stylesheet" type="text/css">
	<link href="" rel="stylesheet" type="text/css">
	<style>
	input[type=text]{
	margin:0 20px 0 10px;
	}
	button{
	margin:0 20px;}
	input:valid {
  color: green;
}
input:invalid {
  color: red;
}
#wrapper{
	height:calc(100vh - 100px);
	background:#ccc;
}
div#time_left {
    bottom: 40px;
    color: #e27373;
    font-weight: bold;
    position: absolute;
    right: 20px;
    font-size: x-large;
}
.static{
	position:absolute;
	top:50%;
	left: 50%;
	transform: translate(-50%,-50%)
}
.light-box{
	position:absolute;
	top:0;
	left:0;
	right: 0;
	bottom: 0;
background-color: rgba(0,0,0,0.5);
}
.hide{
	display: none;
}
#info_box li{
	list-style: none;

}
#info_box{       padding: 10px;
    text-align: center;
	     max-height: 500%;
    width: 300px;
    background: white;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%,-50%);  
	overflow: auto;
    height: 500px;}
	</style>
</head>

<body>
	
	<form id="test" style="display: flex;padding: 10px 10px 0;justify-content: center;">
		<div id="time_left"></div>
		<label>Minutes:</label>
		<input type="text" name="minutes" pattern="\d{1,2}" value="2" placeholder="Enter Minutes //Eg: 2" title="Minutes is two digit and numeric" required>
		<label>Seconds:</label>
		<input type="text" name="seconds" pattern="\d{1,2}" value="3" placeholder="Enter Seconds //Eg: 10" title="Seconds is two digit and numeric" required>
		<!-- <input type="radio" name="position" value="0" title="Position" >
		<label>Random</label> -->
		<input type="radio" name="position" value="1" title="Position" checked>
		<label>Static</label>
		<button type="submit">Start</button>
		<button type="cancel">Stop</button>
	</form>
	<hr>
	<div id="wrapper">
		<div id="text" style=" color: red; font-size: 60px; "></div>
	</div>
	<div class="light-box hide"><div id="info_box"><button type="res">Result</button></div></div>
	

	
	
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script type="text/javascript" src="data/word.js"></script>
	<script>
		var words = [];
		var result=[]
		$(document).ready(function(){
			var listOfWords = data.split("\n");
			window.localStorage.setItem('words', JSON.stringify(listOfWords));
			loadWords();
			$('#test').submit(function () {
				$('button[type=submit]').attr('disabled','true')
				var min = $('[name=minutes]').val();
				var sec = $('[name=seconds]').val();
				var mod = $('[name=position]').val();
				render(min,sec,mod);
			 return false;
			});
		})
		$('button[type=cancel]').click(function(){

			window.location.reload();
		})
		$('button[type=res]').click(function(){
			if($('button[type=res]').html()=='Close'){
				window.location.reload();
			}
			var html='<ul>';
			result.forEach(function(e) {
				html+='<li>'+e+'</li>'
			});
			html+='</ul'>
			$('#info_box').append(html)
			$('button[type=res]').html('Close');
		})
		function loadWords(){
			words = JSON.parse(window.localStorage.getItem('words'));
			
		}
		function render(min,sec,mod){
		
			if(mod == 1){
				$('#text').addClass('static');
			}
			var count = Math.ceil((min*60)/sec);
			var c =min*60;
			var timeLeft =  setInterval(function() {
				c--;
				if(c>=0){
					$('#time_left').html(c);
				}
				
			}, 1000);
			var refreshId = setInterval(function() {
				var rand = words[(Math.random() * words.length) | 0]
				if(result.indexOf(rand) == -1){
					count--;
					if (count > 0) {
						result.push(rand);
						console.log(rand)
						//$("#text").html(rand)
						//$("#text").show();	
						$('#text').hide().html(rand).fadeIn('slow');
					}
					else{
						clearInterval(refreshId);
						$('button[type=submit]').removeAttr('disabled')
						onLoader();
					}
					
					}
				
			}, sec*1000);
						
		}
		function onLoader(){
			$('.light-box').removeClass('hide')
			$('#info_box').removeClass('hide')
		}
		function offLoader(){
			$('.light-box').addClass('hide')
			
			$('#info_box').addClass('hide')
		}
		function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}
		
	</script>
</body>
</html>
